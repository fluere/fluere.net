/*!
 * @fileOverview Utility functions.
 */
!function(t){"use strict";t.getScrollElement=function(){var e,n=t(window).scrollTop();return t(window).scrollTop(n+1),e=t("html").scrollTop()>0?"html":"body",t(window).scrollTop(n),e},t.fn.smoothScroll=function(e){var n=t.extend({selector:null,speed:1300,easing:"easeInOutCubic",callback:null,highlight:!1,highlightTime:2e3},e),i=t(t.getScrollElement());return i.on("mousewheel",function(){i.stop()}),this.on("click.smoothscroll",n.selector,function(){var e,o,a=t(document).height()-t(window).height();return e=this.hash?t(this.hash.replace(":","\\:")):null,e&&e.length?(o=Math.min(a,e.offset().top),i.animate({scrollTop:o},n.speed,n.easing,function(){n.callback&&n.callback(),n.highlight&&(e.addClass("is-highlight"),setTimeout(function(){e.removeClass("is-highlight")},n.highlightTime))}),!1):void 0}),this}}(window.jQuery),/*!
 * @fileOverview Common functions.
 */
function(t){"use strict";var e=t(window),n=t("html"),i=t("header.page-header"),o=t("#main-content"),a=n.hasClass("mobile"),s=function(){l(),h(),d(),u(),r()},c=function(){o.addClass("is-loading"),window.scrollTo(0,o.offset().top)},r=function(){t("a").filter('[href^="http"]:not([href*="'+location.hostname+'"]):not([target])').attr("target","_blank").end().filter('[href^="#"]:not([href="#"]):not([rel="footnote"])').smoothScroll().end().filter('[rel="footnote"]').smoothScroll({highlight:!0}),o.find("code[data-gist-id]").length&&window.gistEmbed(),t("#disqus_thread").length&&o.append('<script src="//fluere.disqus.com/embed.js" async></script>'),f(),o.filter(".is-loading").removeClass("is-loading").find(".archive__title, .archive__item, .entry__header, .entry__body>*, .entry__comment, .pagination, .return-home").fadeTo(0,0).each(function(e){t(this).stop(!0,!0).delay(100*(e+1)+100).fadeTo(400,1)}),"ga"in window&&window.ga("send","pageview",window.location.pathname+window.location.search)},l=function(){e.on("load resize orientationchange scroll",function(){i.css("minHeight",e.height()),o.css("minHeight",e.height())}).trigger("resize")},h=function(){var e='a:not([target]):not([href^="#"])';a?t(e).not('[href*="#"]').each(function(){t(this).attr("href",t(this).attr("href")+"#main-content")}):t.pjax({area:"#main-content",link:e,load:{script:!0},callback:r,callbacks:{before:c},scrollTop:!1,scrollLeft:!1})},d=function(){a||n.niceScroll({cursoropacitymax:.4,cursorwidth:7,mousescrollstep:20})},u=function(){var n=t("div.background");n.is(":visible")&&e.on("scroll.swapbg",function(){var t=e.height(),i=e.scrollTop();t>=i?n.css("opacity",Math.max(0,1-i/t)):n.css("opacity",0)}).trigger("scroll.swapbg")},f=function(){var e=location.pathname.split("/");"tag"!==e[0]||e.length<2||(t("title").text(t("html").text().replace(/^archive/,e[1])),t("h1.archive__title").text(e[1]))};t(document).ready(s),e.on("load",function(){t("html").addClass("is-ready")})}(window.jQuery),/*!
 * @fileOverview Soundtrcks functions.
 */
function(t){"use strict";var e="http://8tracks.com/users/{username}/mixes.jsonp",n="http://8tracks.com/mixes/{id}/player_v3_universal/",i="fluere",o=100,a="c0a25a1aa2e7628c9b2d58ecddcecafe95489012",s=3,c=t("html"),r=t("#soundtracks"),l=r.find(".soundtracks__handle"),h=r.find(".soundtracks__overlay"),d=r.find(".soundtracks__content"),u=r.find(".soundtracks__embeded"),f=r.find(".soundtracks__index"),m=function(){p(),r.on("mousewheel",function(t){t.stopPropagation()}),l.on("click",w),h.hide().on("click",_),d.on("click",function(){return!1})},p=function(){var n=[];t.ajax({type:"GET",url:e.replace("{username}",i),dataType:"jsonp",jsonp:"callback",data:{per_page:o,api_key:a,api_version:s}}).done(function(e){t.each(e.mix_set.mixes,function(){n.push('<li><a href="https://8tracks.com/'+this.web_path+'" target="_blank" data-mixid="'+this.id+'" title="'+this.description+'">'+this.name+'<span class="tracks-count">('+this.tracks_count+'tracks)</span><i class="fa fa-caret-square-o-right"></i></a></li>')}),f.append(n).find("a").on("click",g)}).fail(function(){r.remove()})},g=function(){var e=n.replace("{id}",t(this).data("mixid"));return u.attr("src",e),f.find(".is-current").removeClass("is-current"),t(this).addClass("is-current"),!1},w=function(){h.is(":visible")?_():v()},v=function(){c.addClass("show-overlay"),h.hide().fadeIn(600,"easeOutExpo"),t(document).on("keydown.hideoverlay",function(t){return 27===t.keyCode?(_(),!1):void 0})},_=function(){c.removeClass("show-overlay"),h.fadeOut(600,"easeOutExpo"),t(document).off("keydown.hideoverlay")};t(document).ready(m)}(window.jQuery);