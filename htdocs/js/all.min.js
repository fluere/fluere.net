/*!
 * @fileOverview Utility functions.
 */
!function(t){"use strict";t.getScrollElement=function(){var e,n=t(window).scrollTop();return t(window).scrollTop(n+1),e=t("html").scrollTop()>0?"html":"body",t(window).scrollTop(n),e},t.fn.smoothScroll=function(e){var n=t.extend({selector:null,speed:1300,easing:"easeInOutCubic",callback:null,highlight:!1,highlightTime:2e3},e),o=t(t.getScrollElement());return o.on("mousewheel",function(){o.stop()}),this.on("click.smoothscroll",n.selector,function(){var e,i,a=t(document).height()-t(window).height();return e=this.hash?t(this.hash.replace(":","\\:")):null,e&&e.length?(i=Math.min(a,e.offset().top),o.animate({scrollTop:i},n.speed,n.easing,function(){n.callback&&n.callback(),n.highlight&&(e.addClass("is-highlight"),setTimeout(function(){e.removeClass("is-highlight")},n.highlightTime))}),!1):void 0}),this},t.fn.popup=function(e){var n,o=t.extend({width:600,height:500,menubar:"no",toolbar:"no",location:"no",status:"no",resizable:"no",scrollbars:"no"},e);return o.top=Math.floor((window.screen.height-o.height)/2),o.left=Math.floor((window.screen.width-o.width)/2),n=t.param(o).replace(/&/g,","),this.filter("[href]").each(function(){t(this).on("click",function(){return window.open(t(this).attr("href"),"",n),!1})}),this}}(window.jQuery),/*!
 * @fileOverview Common functions.
 */
function(t){"use strict";var e=t(window),n=t("html"),o=t("header.page-header"),i=t("div.content"),a=n.hasClass("mobile"),r=function(){l(),h(),d(),u(),f(".page-header, .page-footer"),c()},s=function(){i.addClass("is-loading"),window.scrollTo(0,o.outerHeight())},c=function(){t("#main-content").css("minHeight",e.height()),window.scrollTo(0,o.outerHeight()),f("#main-content"),p(),i.find("code[data-gist-id]").length&&window.gistEmbed(),"ga"in window&&window.ga("send","pageview",window.location.pathname+window.location.search),i.filter(".is-loading").removeClass("is-loading").find(".archive__title, .archive__item, .entry__header, .entry__body>*, .entry__comment, .pagination, .return-home").fadeTo(0,0).each(function(e){t(this).stop(!0,!0).delay(70*(e+1)+100).fadeTo(300,1)})},l=function(){e.on("load resize"+(a?"orientationchange scroll":""),function(){o.css("minHeight",e.height())}).trigger("resize")},h=function(){var e='a:not([target]):not([href^="#"])';a?t(e).not('[href*="#"]').each(function(){t(this).attr("href",t(this).attr("href")+"#main-content")}):(t.pjax({area:"#main-content",link:e,scrollTop:!1,scrollLeft:!1}),t(document).on("pjax:fetch",s).on("pjax:DOMContentLoaded",c))},d=function(){a||n.niceScroll({cursoropacitymax:.4,cursorwidth:7,mousescrollstep:20})},u=function(){var n=t("div.background");n.is(":visible")&&e.on("scroll.swapbg",function(){var t=e.height(),o=e.scrollTop();t>=o?n.css("opacity",Math.max(0,1-o/t)):n.css("opacity",0)}).trigger("scroll.swapbg")},f=function(e){t(e).find("a").filter('[href^="http"]:not([href*="'+location.hostname+'"]):not([target])').attr("target","_blank").end().filter('[href^="#"]:not([href="#"]):not([rel="footnote"])').smoothScroll().end().filter('[rel="footnote"]').smoothScroll({highlight:!0}).end().filter(".popup").popup()},p=function(){var e=location.pathname.split("/");"tag"!==e[1]||e.length<3||(t("title").text(t("title").text().replace(/^archive/,"#"+e[2])),t("h1.archive__title").text("#"+e[2]))};t(document).ready(r),e.on("load",function(){t("html").addClass("is-ready")})}(window.jQuery),/*!
 * @fileOverview Soundtrcks functions.
 */
function(t){"use strict";var e="http://8tracks.com/users/{username}/mixes.jsonp",n="http://8tracks.com/mixes/{id}/player_v3_universal/",o="fluere",i=100,a="c0a25a1aa2e7628c9b2d58ecddcecafe95489012",r=3,s=t("html"),c=t("#soundtracks"),l=c.find(".soundtracks__handle"),h=c.find(".soundtracks__overlay"),d=c.find(".soundtracks__content"),u=c.find(".soundtracks__embeded"),f=c.find(".soundtracks__index"),p=function(){g(),c.on("mousewheel",function(t){t.stopPropagation()}),l.on("click",w),h.hide().on("click",_),d.on("click",function(){return!1})},g=function(){var n=[];t.ajax({type:"GET",url:e.replace("{username}",o),dataType:"jsonp",jsonp:"callback",data:{per_page:i,api_key:a,api_version:r}}).done(function(e){t.each(e.mix_set.mixes,function(){n.push('<li><a href="https://8tracks.com/'+this.web_path+'" target="_blank" data-mixid="'+this.id+'" title="'+this.description+'">'+this.name+'<span class="tracks-count">('+this.tracks_count+'tracks)</span><i class="fa fa-caret-square-o-right"></i></a></li>')}),f.append(n).find("a").on("click",m)}).fail(function(){c.remove()})},m=function(){var e=n.replace("{id}",t(this).data("mixid"));return u.attr("src",e),f.find(".is-current").removeClass("is-current"),t(this).addClass("is-current"),!1},w=function(){h.is(":visible")?_():v()},v=function(){s.addClass("show-overlay"),h.hide().fadeIn(600,"easeOutExpo"),t(document).on("keydown.hideoverlay",function(t){return 27===t.keyCode?(_(),!1):void 0})},_=function(){s.removeClass("show-overlay"),h.fadeOut(600,"easeOutExpo"),t(document).off("keydown.hideoverlay")};t(document).ready(p)}(window.jQuery);